<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="popup.css" />
  <title>ClarityRead</title>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="brand">
        <img src="/assets/icons/icon128.png" alt="ClarityRead" class="logo">
        <div class="brand-text">
          <h1 class="app-title">ClarityRead</h1>
          <div id="readingStatus" class="status-indicator">Ready</div>
        </div>
      </div>
      <button id="themeToggleBtn" class="theme-toggle" aria-label="Toggle theme">
        <span class="theme-icon">üåô</span>
      </button>
    </header>

    <main class="main-content">
      <div class="content-grid">
        <section class="controls-panel">
          <div class="panel accessibility-panel">
            <h2 class="panel-title">Accessibility</h2>
            <div class="controls-grid">
              <label class="toggle-control">
                <input id="dyslexicToggle" type="checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label">Dyslexia Font</span>
              </label>
              <label class="toggle-control">
                <input id="reflowToggle" type="checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label">Reading Mode</span>
              </label>
              <label class="toggle-control">
                <input id="contrastToggle" type="checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label">High Contrast</span>
              </label>
              <label class="toggle-control">
                <input id="invertToggle" type="checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label">Invert Colors</span>
              </label>
            </div>
            
            <div id="fontSizeControls" class="font-size-controls" hidden>
              <label class="size-label">
                Font Size: <span id="fontSizeValue" class="size-value">20px</span>
              </label>
              <input id="fontSizeSlider" class="size-slider" type="range" min="14" max="30" step="1" value="20">
            </div>
          </div>

          <div class="panel profiles-panel">
            <h2 class="panel-title">Profiles</h2>
            <div class="profile-controls">
              <select id="profileSelect" class="profile-select">
                <option value="">Choose a profile...</option>
              </select>
              <button id="saveProfileBtn" class="btn btn-secondary">Save Current</button>
            </div>
          </div>

          <div class="panel read-aloud-panel">
            <h2 class="panel-title">Text to Speech</h2>
            
            <div class="voice-controls">
              <label class="control-label">
                Voice
                <select id="voiceSelect" class="voice-select"></select>
              </label>
              
              <div class="audio-settings">
                <label class="control-label">
                  Speed
                  <input type="number" id="rateInput" value="1" min="0.5" max="2" step="0.1" class="number-input">
                </label>
                <label class="control-label">
                  Pitch
                  <input type="number" id="pitchInput" value="1" min="0.5" max="2" step="0.1" class="number-input">
                </label>
              </div>
            </div>

            <label class="checkbox-control">
              <input type="checkbox" id="highlightReading">
              <span class="checkbox-mark"></span>
              <span class="checkbox-label">Highlight while reading</span>
            </label>

            <div class="playback-controls">
              <button id="readBtn" class="btn btn-primary playback-btn">
                <span class="btn-icon">‚ñ∂</span>
                <span class="btn-text">Read</span>
              </button>
              <button id="pauseBtn" class="btn btn-secondary playback-btn">
                <span class="btn-icon">‚è∏</span>
                <span class="btn-text">Pause</span>
              </button>
              <button id="stopBtn" class="btn btn-secondary playback-btn">
                <span class="btn-icon">‚èπ</span>
                <span class="btn-text">Stop</span>
              </button>
            </div>
          </div>

          <div class="panel speed-reading-panel">
            <h2 class="panel-title">Speed Reading</h2>
            <label class="toggle-control">
              <input id="speedToggle" type="checkbox">
              <span class="toggle-slider"></span>
              <span class="toggle-label">Enable Speed Reading</span>
            </label>
            
            <div class="speed-settings">
              <label class="control-label">
                Chunk Size
                <input id="chunkSize" type="number" value="3" min="1" max="12" step="1" class="number-input">
              </label>
              <label class="control-label">
                Rate
                <input id="speedRate" type="number" value="1" min="0.5" max="3" step="0.1" class="number-input">
              </label>
            </div>
          </div>

          <div class="panel data-panel">
            <h2 class="panel-title">Data Management</h2>
            <div class="data-controls">
              <button id="exportProfilesBtn" class="btn btn-secondary">Export Settings</button>
              <input type="file" id="importProfilesInput" accept=".json" style="display:none;">
              <button id="importProfilesBtn" class="btn btn-secondary">Import Settings</button>
            </div>
          </div>
        </section>

        <aside class="sidebar">
          <div class="panel quick-actions-panel">
            <h2 class="panel-title">Quick Actions</h2>
            <div class="quick-actions">
              <button id="summarizePageBtn" class="action-btn">
                <span class="action-icon">üìù</span>
                <span class="action-text">Summarize Page</span>
              </button>
              <!-- put this right after the Summarize Page button inside .quick-actions -->
<label for="summaryDetailSelect" style="display:inline-flex;align-items:center;gap:6px;margin-left:8px;">
  <span style="font-size:12px;">Detail:</span>
  <select id="summaryDetailSelect" style="font-size:12px;padding:4px;border-radius:6px;min-width:96px;">
    <option value="concise">Concise</option>
    <option value="normal" selected>Normal</option>
    <option value="detailed">Detailed</option>
  </select>
</label>

              <button id="focusModeBtn" class="action-btn">
                <span class="action-icon">üéØ</span>
                <span class="action-text">Focus Mode</span>
              </button>
            </div>
          </div>

          <div class="panel stats-panel">
            <h2 class="panel-title">Reading Statistics</h2>
            
            <div class="chart-container">
              <canvas id="statsChart" class="stats-chart"></canvas>
            </div>

            <div class="stats-grid">
              <div class="stat-item">
                <span class="stat-label">Pages Read</span>
                <span id="pagesRead" class="stat-value">0</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Total Time</span>
                <span id="timeRead" class="stat-value">0m 0s</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Average Session</span>
                <span id="avgSession" class="stat-value">0m 0s</span>
              </div>
            </div>

            <div id="badgesContainer" class="achievement-badges"></div>

            <div class="stats-actions">
              <button id="resetStatsBtn" class="btn btn-secondary">Reset Stats</button>
              <button id="shareStatsBtn" class="btn btn-secondary">Share Progress</button>
            </div>
          </div>

          <div class="panel saved-content-panel">
            <h2 class="panel-title">Saved Content</h2>
            <div class="saved-controls">
              <button id="saveSelectionBtn" class="btn btn-primary">Save Selection</button>
              <button id="openSavedManagerBtn" class="btn btn-secondary">Manage Saved</button>
            </div>
            <div id="savedList" class="saved-list"></div>
          </div>

          <div class="panel shortcuts-panel">
            <h2 class="panel-title">Keyboard Shortcuts</h2>
            <div class="shortcuts-list">
              <div class="shortcut-item">
                <span class="shortcut-action">Start Reading</span>
                <kbd class="shortcut-key">Alt+R</kbd>
              </div>
              <div class="shortcut-item">
                <span class="shortcut-action">Stop Reading</span>
                <kbd class="shortcut-key">Alt+S</kbd>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer class="app-footer">
      <p class="footer-text">Select text on any webpage to read specific content</p>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
